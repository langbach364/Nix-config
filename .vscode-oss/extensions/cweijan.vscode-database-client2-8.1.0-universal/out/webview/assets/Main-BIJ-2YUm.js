import{a as B,bh as L,A,r as p,e as z,N as J,v as c,f as b,a7 as P,a9 as R,h as a,g as s,F as U,B as $,j as d,J as u,K as h,o as n,n as C,k as j,L as E,t as K,$ as m,bi as M,I as S,a8 as O,bj as Q,s as F,C as q}from"./app-DpxpnEAY.js";import{u as H}from"./resultUIStore--rkNaxDT.js";import"./constants-DgoLmzql.js";import{b as g,D as T}from"./DatabaseType-C0wmHgR0.js";import"./wrapper-W1gw4xSh.js";import"./viewUtil-DCbZMcCo.js";import"./arrayUtil-CzswX_vs.js";import"./objectUtil-Z6JRxuBJ.js";const G="data:image/svg+xml,%3csvg%20height='20'%20width='20'%20viewBox='-11.9%20-2%201003.9%20995.6'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m12.1%20353.9s-24-17.3%204.8-40.4l67.1-60s19.2-20.2%2039.5-2.6l619.2%20468.8v224.8s-.3%2035.3-45.6%2031.4z'%20fill='%232489ca'%20/%3e%3cpath%20d='m171.7%20498.8-159.6%20145.1s-16.4%2012.2%200%2034l74.1%2067.4s17.6%2018.9%2043.6-2.6l169.2-128.3z'%20fill='%231070b3'%20/%3e%3cpath%20d='m451.9%20500%20292.7-223.5-1.9-223.6s-12.5-48.8-54.2-23.4l-389.5%20354.5z'%20fill='%230877b9'%20/%3e%3cpath%20d='m697.1%20976.2c17%2017.4%2037.6%2011.7%2037.6%2011.7l228.1-112.4c29.2-19.9%2025.1-44.6%2025.1-44.6v-671.2c0-29.5-30.2-39.7-30.2-39.7l-197.7-95.3c-43.2-26.7-71.5%204.8-71.5%204.8s36.4-26.2%2054.2%2023.4v887.5c0%206.1-1.3%2012.1-3.9%2017.5-5.2%2010.5-16.5%2020.3-43.6%2016.2z'%20fill='%233c99d4'%20/%3e%3c/svg%3e",W={id:"tableTab",class:"tab"},X=["onClick"],Y=B({__name:"Main",setup(Z){const _=L(),w=H(),k=A(),l=p(null),v=p(!1),r=p("result"),x=z(()=>[{id:"design",i18n:"table.design",icon:"codicon-edit",disabled:()=>!v.value},{id:"result",i18n:"table.data",icon:"codicon-database blue"},{id:"log",i18n:"common.log",icon:"codicon-file"},{id:"erDiagram",i18n:"table.erDiagram",icon:"codicon-symbol-class yellow",hidden:()=>g(l.value),disabled:()=>!v.value||g(l.value)},{id:"status",i18n:"table.monitor",icon:"codicon-graph-line",disabled:()=>[T.SQLITE,T.DUCK_DB].includes(l.value),hidden:()=>g(l.value)}].filter(t=>{var e;return!((e=t.hidden)!=null&&e.call(t))})),f=t=>{typeof t=="string"&&(t={id:t});const{id:e,disabled:o}=t;o!=null&&o()||r.value!==e&&(r.value=e,_.push(e),e=="log"&&c.emit("initTerminal"))};J(()=>{r.value=_.currentRoute.value.name,window.addEventListener("message",({data:t})=>{["RUN","DATA"].includes(t.type)&&(l.value=t.content.dbType,["design","result","erDiagram"].includes(r.value)||f("result"))}),c.on("table_info",({singleTable:t,dbType:e})=>{l.value=e,v.value=t,v.value||f("result")})});const D=()=>{c.emit("editInVSCode",w.toolbar.sql)},N=()=>{if(!k.isPay)return F(m("plan.premiumNotice"));c.emit("viewJSON")};return(t,e)=>{const o=h("vsc-tooltip"),I=h("router-view");return n(),b("div",null,[P(s("ul",W,[(n(!0),b(U,null,$(x.value,(i,V)=>{var y;return n(),b("li",{key:V,class:C(["tab__item",{"tab__item--active":r.value==i.id,disabled:(y=i.disabled)==null?void 0:y.call(i)}]),onClick:ee=>f(i)},[i.icon?(n(),b("i",{key:0,type:"icon",class:C(i.icon),style:{position:"relative",top:"3px"}},null,2)):j("",!0),E(" "+K(a(m)(i.i18n)),1)],10,X)}),128)),d(o,{title:a(m)("table.editInVSCode")},{default:u(()=>[s("div",{class:"panel-icon !pl-2",style:{"border-left":"1px solid var(--border-color)"},onClick:D},e[1]||(e[1]=[s("img",{src:G,alt:"VSCode Logo"},null,-1)]))]),_:1},8,["title"]),d(o,{title:a(m)("table.viewAsJSON")},{default:u(()=>[s("div",{class:"panel-icon",onClick:N},e[2]||(e[2]=[s("i",{class:"codicon-json text-yellow"},null,-1)]))]),_:1},8,["title"]),d(o,{title:a(m)("table.history")},{default:u(()=>[s("div",{class:"panel-icon",onClick:e[0]||(e[0]=i=>a(c).emit("viewHistory"))},e[3]||(e[3]=[s("i",{class:"codicon-history"},null,-1)]))]),_:1},8,["title"])],512),[[R,a(w).showSQLPanel]]),d(I,null,{default:u(({Component:i})=>[d(M,null,{default:u(()=>[(n(),S(Q,null,[(n(),S(O(i)))],1024))]),_:2},1024)]),_:1})])}}}),ce=q(Y,[["__scopeId","data-v-f2b0fd64"]]);export{ce as default};
