"use strict";(self.webpackChunkworkbench_import_entity=self.webpackChunkworkbench_import_entity||[]).push([[6029],{26029:(e,n,t)=>{t.r(n),t.d(n,{FileUploader:()=>Be,KeyValueEditor:()=>tt});var l=t(7560),i=t(40540),o=t.n(i),a=t(59530),r=t.n(a),s=t(78476),d=t(50297),c=t(98283),u=t(49284),p=t(69356),h=t.n(p),b=t(22833),g=t.n(b),m=t(1314),v=t.n(m),f=t(207),y=o().createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o().createElement("path",{d:"M6 4.5C6.41421 4.5 6.75 4.16421 6.75 3.75C6.75 3.33579 6.41421 3 6 3C5.58579 3 5.25 3.33579 5.25 3.75C5.25 4.16421 5.58579 4.5 6 4.5Z",fill:"#6B6B6B"}),o().createElement("path",{d:"M4.5 9V8H5.5V6H4.5V5H6.5V8H7.5V9H4.5Z",fill:"#6B6B6B"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6ZM11 6C11 8.76142 8.76142 11 6 11C3.23858 11 1 8.76142 1 6C1 3.23858 3.23858 1 6 1C8.76142 1 11 3.23858 11 6Z",fill:"#6B6B6B"})),x=o().forwardRef((function(e,n){return o().createElement(f.Z,(0,l.Z)({},e,{svg:y,ref:n}))}));x.getName=function(){return"icon-state-info-stroke-small"};const C=x;var w=t(73657),k=t(20901),V=t(9460),j=t(37110),S=t(81397);const E=r().span.withConfig({displayName:"Checkbox__StyledCheckBoxActionableContainer",componentId:"yn1wyf-0"})(["position:relative;cursor:",";user-select:none;display:flex;width:max-content;align-items:center;& *{","}"],(e=>e.isDisabled?"not-allowed":"pointer"),(e=>e.isDisabled?"cursor: not-allowed;":"cursor: pointer")),D=r().div.withConfig({displayName:"Checkbox__StyledIconContainer",componentId:"yn1wyf-1"})(["margin-top:1px;min-height:14px;min-width:14px;height:14px;width:14px;border:",";border-radius:",";background-color:",";box-sizing:border-box;text-align:center;z-index:1;display:flex;justify-content:center;align-items:center;margin-right:",";svg{path{fill:",";}}align-self:flex-start;"],(e=>function(e,n,t,l){let i;return i=e||t?`${l["border-width-default"]} ${l["border-style-solid"]} transparent`:`${l["border-width-default"]} ${l["border-style-solid"]} ${l["checkbox-border-color"]}`,n&&(i=`${l["border-width-default"]} ${l["border-style-solid"]} ${l["checkbox-disabled-border-color"]}`),i}(e.isChecked,e.isDisabled,e.isIndeterminate,e.theme)),(e=>e.theme[["border-radius-s"]]),(e=>function(e,n,t,l,i){if(e||n){if(t)return i["checkbox-disabled-background-color"];if("primary"===l)return i["checkbox-background-color"];if("secondary"===l)return i["content-color-primary"]}return"transparent"}(e.isChecked,e.isIndeterminate,e.isDisabled,e.type,e.theme)),(e=>e.label&&e.theme["spacing-s"]),(e=>e.theme["checkbox-marker-color"])),T=r().input.attrs({type:"checkbox"}).withConfig({displayName:"Checkbox__StyledInputCheckBox",componentId:"yn1wyf-2"})(["margin:0;border:0;height:14px;width:14px;position:absolute;appearance:none;margin-bottom:",";&:focus{outline-color:",";}"],(e=>e.label&&"2px"),(e=>e.theme["checkbox-outline-color"])),_=r().div.withConfig({displayName:"Checkbox__StyledHelperTextContainer",componentId:"yn1wyf-3"})(["margin-left:22px;margin-top:2px;"]),M=r().div.withConfig({displayName:"Checkbox__StyledCheckBoxContainer",componentId:"yn1wyf-4"})(["width:auto;"]),N=r().span.withConfig({displayName:"Checkbox__StyledInfoIconWrapper",componentId:"yn1wyf-5"})(["font-size:0px;padding-left:8px;cursor:default;*{cursor:default;}:hover{svg{path{fill:",";}}}display:inline-flex;"],(e=>e.theme["content-color-primary"])),R=o().forwardRef((function(e,n){const{label:t,isChecked:l,id:a,name:r,value:s,className:d,helperText:c,isIndeterminate:u,isDisabled:p,onChange:h,onMouseDown:b,onMouseUp:g,onFocus:m,onBlur:v,onMouseEnter:f,onMouseLeave:y,type:x,infoText:R,autoFocus:Z,"data-testid":F,"data-click":I}=e,[A,W]=(0,i.useState)("default");let z="false";return u?z="mixed":l&&(z="true"),o().createElement(M,{className:d,ref:n},o().createElement(E,{isDisabled:p,onClick:e=>{p||h&&h(!l,s,e)},onMouseEnter:e=>{p||(W("hover"),f&&f(e))},onMouseLeave:e=>{p||(W("default"),y&&y(e))},onMouseDown:e=>{p||(W("active"),b&&b(e))},onMouseUp:e=>{p||g&&g(e)},onBlur:e=>{p||(v&&v(e),W("default"))},onFocus:e=>{p||(W("focus"),m&&m(e))},"aria-checked":z,role:"checkbox"},o().createElement(D,{label:t,isChecked:l,isIndeterminate:u,isDisabled:p,interactionState:A,type:x,"data-aether-id":"aether-checkbox"},function(e,n){return n?o().createElement(k.Z,null):e?o().createElement(w.Z,null):""}(l,u)),o().createElement(T,{id:a,name:r,value:s,checked:l,onChange:()=>{},autoFocus:Z,"data-testid":F,"data-click":I,label:t}),function(e,n,t){return"string"==typeof e?o().createElement(j.Z,{type:"optionSelector",isDisabled:t,text:e,htmlFor:n}):e&&o().isValidElement(e)&&e.type===j.Z?o().cloneElement(e,{type:"optionSelector",htmlFor:n,isDisabled:t}):null}(t,a,p),R?o().createElement(N,{onClick:e=>e.stopPropagation()},o().createElement(S.Z,{content:R,placement:"top-start"},o().createElement(C,null))):null),t&&c?o().createElement(_,null,o().createElement(V.ZP,{type:"body-small",color:"content-color-secondary"},c)):"")}));R.displayName="Checkbox";const Z=R;R.defaultProps={isChecked:!1,id:null,name:null,value:"",className:"",helperText:"",isIndeterminate:!1,isDisabled:!1,label:"",onMouseDown:null,onMouseUp:null,onFocus:null,onBlur:null,onMouseEnter:null,onMouseLeave:null,type:"primary",infoText:"",autoFocus:!1,"data-testid":"aether-checkbox","data-click":""},R.propTypes={isChecked:v().bool,id:v().string,name:v().string,value:v().string,label:e=>{const{label:n}=e;return n?n.type!==j.Z&&"string"!=typeof n?new Error("Checkbox: label prop only accepts string or the Aether's Label component as valid value."):null:new Error("Checkbox: label is a required prop for the checkbox component")},type:v().oneOf(["primary","secondary"]),helperText:v().string,isIndeterminate:v().bool,isDisabled:v().bool,onChange:v().func.isRequired,onMouseEnter:v().func,onMouseLeave:v().func,onMouseDown:v().func,onMouseUp:v().func,onFocus:v().func,onBlur:v().func,className:v().string,infoText:v().string,autoFocus:v().bool,"data-testid":v().string,"data-click":v().string};var F=t(52322);const I=r().div.withConfig({displayName:"key-value-row-actions__KeyValueRowActionsContainer",componentId:"sc-giwhs-0"})(["position:relative;display:flex;width:40px;justify-content:flex-end;align-items:center;padding-right:4px;border-left:var(--border-width-default) var(--border-style-solid) var(--border-color-default);border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);background-color:",";"],(e=>e.disabled?"var(--background-color-secondary);":"inherit")),A=r()(Z).withConfig({displayName:"key-value-row-actions__StyledCheckbox",componentId:"sc-giwhs-1"})(["> span > div{height:16px;width:16px;background-color:",";}&.disabled{opacity:0.4;}"],(e=>e.isChecked?"dark"===e.theme.name?"#ffffff":"#262626":"inherit"));function W(e){return(0,F.jsx)(I,{disabled:e.disabled,children:e.shouldShowCheckbox&&(0,F.jsx)(A,{className:g()({disabled:e.isCheckboxDisabled}),isChecked:e.isRowEnabled,onChange:e.onToggleEnabledState,isDisabled:e.isCheckboxDisabled})})}const z=["content"],P=r().div.withConfig({displayName:"key-value-column__KeyValueColumnContainer",componentId:"sc-shzowe-0"})(["display:flex;flex:",";overflow-y:visible;min-width:0;margin:var(--spacing-zero);position:relative;height:32px;box-sizing:border-box;border-right:",";background-color:",";.key-value-cell{color:",";}"],(e=>e.isLastColumn?`0 1 ${e.columnWidth}%`:`0 0 ${e.columnWidth}%`),(({isLastColumn:e})=>e?"unset":"var(--border-width-default) var(--border-style-solid)\n    var(--border-color-default)"),(e=>e.isNonEditable?"var(--background-color-secondary)":"inherit"),(e=>e.isNonEditable?"var(--content-color-secondary)":"inherit"));function B(e){let{content:n}=e,t=(0,c.Z)(e,z);return(0,F.jsx)(P,(0,l.Z)({},t,{children:n}))}const O=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function H(e,n){if(typeof e!=typeof n)return!1;const t=typeof e;return["string","number","boolean","undefined"].includes(typeof e)?e===n:Array.isArray(e)&&Array.isArray(n)?e.length===n.length&&e.every(((e,t)=>H(e,n[t]))):"object"===t&&(null===e&&null===n||null!==e&&null!==n&&!Array.isArray(e)&&!Array.isArray(n)&&Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every((t=>H(e[t],n[t]))))}var K=o().createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o().createElement("path",{d:"M4 1V0H8V1H11V2H1V1H4Z",fill:"#6B6B6B"}),o().createElement("path",{d:"M3 10.5V3H2V10.5C2 11.3284 2.67157 12 3.5 12H8.5C9.32843 12 10 11.3284 10 10.5V3H9V10.5C9 10.7761 8.77614 11 8.5 11H3.5C3.22386 11 3 10.7761 3 10.5Z",fill:"#6B6B6B"}),o().createElement("path",{d:"M4.25 10V3H5.25V10H4.25Z",fill:"#6B6B6B"}),o().createElement("path",{d:"M6.75 3V10H7.75V3H6.75Z",fill:"#6B6B6B"})),L=o().forwardRef((function(e,n){return o().createElement(f.Z,(0,l.Z)({},e,{svg:K,ref:n}))}));L.getName=function(){return"icon-action-delete-stroke-small"};const $=L,U=r().div.withConfig({displayName:"delete-row__IconContainer",componentId:"sc-1t4lde4-0"})(["align-items:center;height:24px;display:inline-flex;padding:0 var(--spacing-s);border-radius:var(--border-radius-default);&:hover{background-color:var(--highlight-background-color-primary);cursor:pointer;}"]);function q({onClick:e}){return(0,F.jsx)(U,{className:"delete-button",onClick:e,role:"button","aria-label":"delete-row",children:(0,F.jsx)($,{})})}function X(e,n,t){let l,i,o,a,r,s,d=0,c=!1,u=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(n=+n||0,t&&function(e){const n=typeof e;return null!=e&&("object"===n||"function"===n)}(t)){if(c=!(null==t||!t.leading),u="maxWait"in t,u){const e=(null==t?void 0:t.maxWait)||0;o=Math.max(+e,n)}p="trailing"in t?!(null==t||!t.trailing):p}function h(n){const t=l,o=i;return l=i=void 0,d=n,a=e.apply(o,t),a}function b(e,n){return setTimeout(e,n)}function g(e){const t=e-s;return void 0===s||t>=n||t<0||u&&e-d>=o}function m(){const e=Date.now();if(g(e))return v(e);r=b(m,function(e){const t=e-d,l=n-(e-s);return u?Math.min(l,o-t):l}(e))}function v(e){return r=void 0,p&&l?h(e):(l=i=void 0,a)}function f(...e){const t=Date.now(),o=g(t);if(l=e,i=this,s=t,o){if(void 0===r)return function(e){return d=e,r=b(m,n),c?h(e):a}(s);if(u)return r=b(m,n),h(s)}return void 0===r&&(r=b(m,n)),a}return f.cancel=function(){void 0!==r&&clearTimeout(r),d=0,l=s=i=r=void 0},f.flush=function(){return void 0===r?a:v(Date.now())},f.pending=function(){return void 0!==r},f}const Y=["indicators","isDuplicated"],G=r().textarea.withConfig({displayName:"editable-cell__StyledTextArea",componentId:"sc-1v6ab2g-0"})(["width:100%;color:var(--content-color-primary);font-size:inherit;font-family:inherit;outline:transparent;resize:none;font-weight:inherit;background:var(--background-color-primary);margin:var(--spacing-xs);padding:var(--spacing-xs) var(--spacing-zero) var(--spacing-xs) var(--spacing-xs);border:var(--border-width-default) var(--border-style-solid) var(--border-color-default);z-index:1;",""],(({isDuplicated:e})=>e&&"padding-right: var(--spacing-l)")),J=r().div.withConfig({displayName:"editable-cell__StyledWrapper",componentId:"sc-1v6ab2g-1"})(["display:flex;align-items:flex-start;max-height:var(--size-m);height:100%;width:100%;"]),Q=X(((e,n,t)=>{var l,i;const o=null!=(l=(null==e?void 0:e.scrollHeight)/(null==e||null==(i=e.parentNode)?void 0:i.clientHeight))?l:0;o!==n&&t(Math.ceil(o))}),100);function ee(e){let{indicators:n,isDuplicated:t}=e,l=(0,c.Z)(e,Y);const o=(0,i.useRef)(null),[a,r]=(0,i.useState)(1);return(0,i.useEffect)((()=>(setTimeout((()=>{if(o.current){const e=o.current.value.length;o.current.selectionStart=e,o.current.selectionEnd=e,o.current.scrollTop=o.current.scrollHeight}})),Q(o.current,a,r),()=>{Q.cancel()})),[a]),(0,F.jsxs)(J,{children:[(0,F.jsx)(G,{isDuplicated:t,role:"cell","aria-label":`${l.type} input`,ref:o,value:l.value,rows:a,onChange:e=>{l.onChange(e.target.value),Q(o.current,a,r)},autoFocus:l.shouldFocusOnMount,placeholder:l.placeholder||"",readOnly:l.readOnly,onBlur:l.onBlur,onKeyDown:e=>{l.preventEnter&&13===e.keyCode&&e.preventDefault()}}),n]})}function ne(e){return"string"==typeof e?e:e?e&&e.toString?String(e):Object.prototype.toString.call(e):""}function te(e,n={}){return e?("string"!=typeof e&&(e=ne(e)),e.split("\n").map(((e,t)=>(0,F.jsx)("span",{children:ie(e,n)},t)))):e}function le(e,n={}){return e?("string"!=typeof e&&(e=ne(e)),ie(e.split("\n")[0],n)):e}function ie(e,n={}){const t=n.maxLength||100;return e?("string"!=typeof e&&(e=ne(e)),e.length<=t?e:e.slice(0,t+1)):""}const oe=r().div.withConfig({displayName:"key-value-cell__KeyValueCellContainer",componentId:"sc-1i3qzo1-0"})(["width:100%;padding:var(--spacing-zero) var(--spacing-xs) var(--spacing-zero) 9px;align-items:center;cursor:text;font-size:var(--text-size-m);user-select:none;display:flex;height:100%;box-sizing:border-box;justify-content:space-between;color:var(--content-color-primary);",""],(({isDuplicated:e})=>e&&"padding-right: var(--spacing-xl)")),ae=r().div.withConfig({displayName:"key-value-cell__KeyValueCellTextContainer",componentId:"sc-1i3qzo1-1"})(["white-space:pre;overflow:hidden;text-overflow:ellipsis;&:empty:not(:focus)::before{content:attr(data-placeholder);color:var(--content-color-tertiary);}"]);function re(e){const n=(0,i.useRef)(null),{value:t,placeholder:l,onBlur:o,preventEnter:a,onFocus:r,type:s,currentWidth:d,actions:c,indicators:u,isDuplicated:p}=e,h=!a,b=(0,i.useCallback)((()=>{null==r||r()}),[r]),g=!t&&l,m=g?`${s} empty cell`:`${s} cell`;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(oe,{onBlur:o,onClick:b,ref:n,tabIndex:"0",onFocus:b,isDuplicated:p,children:(0,F.jsx)(ae,{role:"cell","aria-label":m,"data-placeholder":g?l:null,children:h?le(t,{maxLength:Math.ceil(2*d)}):te(t,{maxLength:Math.ceil(2*d)})})}),u,c]})}oe.displayName="KeyValueCellContainer";const se=[{value:"text",label:"Text"},{value:"file",label:"File"}],de="secret",ce="default",ue=r().div.withConfig({displayName:"masked-cell__MaskedInputContainer",componentId:"sc-1fwx2vm-0"})(["padding-inline-start:var(--spacing-xs);display:flex;flex:1;input{border:var(--border-width-default) var(--border-style-solid) transparent;color:var(--content-color-primary);width:100%;font-size:var(--text-size-m);line-height:var(--line-height-m);font-family:var(--text-family-default);height:var(--controls-size-default);box-sizing:border-box;background-color:transparent;padding:var(--spacing-zero);overflow:hidden;text-overflow:ellipsis;display:block;padding-left:var(--spacing-xs);&:hover,&:focus,&:active{outline:none;}",";}"],(({isFocused:e})=>e&&"\n        border: var(--border-width-default) var(--border-style-solid) var(--border-color-default);\n        background: var(--background-color-primary);\n        height: var(--size-s);\n        padding-left: var(--spacing-xs);\n        margin-top: var(--spacing-xs);\n        margin-right: var(--spacing-s);\n    "));function pe(e){const{value:n,isEditable:t,onBlur:l,onChange:i,onFocus:o,type:a}=e,r=`${a} masked cell`;return(0,F.jsx)(ue,{isFocused:Boolean(t),onBlur:l,onClick:o,onFocus:o,children:(0,F.jsx)("input",{role:"cell","aria-label":r,value:n||"",spellCheck:!1,type:"password",onChange:e=>{i(e.currentTarget.value)}},"text")})}var he=t(16913),be=t(88131);const ge=["hidden","value","isEditable","currentWidth","readOnly","shouldFocusOnMount","onBlur","onChange","onFocus","actions","editorType","maskState","enableVariableSuggestions","placeholder","isDuplicated"],me=r()(he.Z).withConfig({displayName:"key-value-cell-editor__StyledWarningIcon",componentId:"sc-c7rjy0-0"})(["position:absolute;align-self:center;right:var(--spacing-s);z-index:10;"]);function ve(e){const{hidden:n,value:t,isEditable:i,currentWidth:o,readOnly:a,shouldFocusOnMount:r,onBlur:s,onChange:d,onFocus:u,actions:p,editorType:h,maskState:b,enableVariableSuggestions:g,placeholder:m,isDuplicated:v}=e,f=(0,c.Z)(e,ge),y={readOnly:a,shouldFocusOnMount:r,onBlur:s,onChange:d},x=e=>{null==d||d(f.type,e)},C=(0,be.usePostmanInputFeatureFlag)();if(n)return null;if(g&&C){let n=!t&&m?`${f.type} empty cell`:`${f.type} cell`;return i&&(n=`${f.type} input`),(0,F.jsx)(be.KVEditorInput,{value:t||"",onChange:x,suggestions:[],placeholder:"key"===f.type?"Key":"Value",ariaLabel:n,onFocus:u,onBlur:s,shouldFocusOnMount:r,actions:p,indicators:e.indicators,isEditable:!y.readOnly})}return h===de&&b.isMasked?(0,F.jsx)(pe,(0,l.Z)({onChange:x,onFocus:u,onBlur:s,isEditable:i,value:t,placeholder:m},f)):(0,F.jsxs)(F.Fragment,{children:[i?(0,F.jsx)(ee,(0,l.Z)({},y,{onChange:x,onFocus:u,value:t,placeholder:m,isDuplicated:v},f)):(0,F.jsx)(re,(0,l.Z)({},f,{value:t,onFocus:u,actions:p,onChange:x,placeholder:m,currentWidth:o,isDuplicated:v})),v&&(0,F.jsx)(S.Z,{content:"This variable has been overwritten by a duplicate key.",placement:"bottom",children:(0,F.jsx)(me,{color:"content-color-warning",className:"duplicate-warning-icon"})})]})}var fe=t(74962);const ye=r().div.withConfig({displayName:"key-value-cell-info__InfoIconContainer",componentId:"sc-3nzppj-0"})(["position:absolute;right:var(--spacing-m);display:flex;height:100%;align-items:center;cursor:default;z-index:1;background:transparent !important;"]),xe=({infoTitle:e,info:n})=>(0,F.jsxs)(F.Fragment,{children:[e&&(0,F.jsx)(fe.Z,{type:"h3",styleAs:"h4",text:e}),n&&(0,F.jsx)(V.ZP,{type:"small",color:"content-color-primary",children:n})]}),Ce=e=>{const{info:n,infoTitle:t,placement:i}=e;return n||t?(0,F.jsx)(ye,{children:(0,F.jsx)(S.Z,{content:(0,F.jsx)(xe,(0,l.Z)({},e)),placement:i,children:(0,F.jsx)(C,{})})}):null},we=r()(u.Z).withConfig({displayName:"key-value-dropdown__StyledSelect",componentId:"sc-1ccix0v-0"})(["margin:var(--spacing-xs);min-width:80px;"]);function ke(e){const{hidden:n,options:t,defaultOption:l,onChange:o}=e,[a,r]=(0,i.useState)(l),[s,d]=(0,i.useState)(!1);return!s&&n?null:(0,F.jsx)(we,{viaPortal:!0,className:"single-type-select","aria-label":"KV Type Select",triggerWidth:"auto",triggerSize:"small",triggerType:"tertiary",menuMinWidth:100,menuMaxWidth:165,isSearchable:!1,isClearable:!1,options:t,value:a,onOpen:()=>d(!0),onClose:()=>d(!1),onChange:e=>{r(e),null==o||o(e)}})}var Ve=t(58560),je=t(69019),Se=t(23180);const Ee=r().button.withConfig({displayName:"CustomChipInputComponents__StyledCloseIconContainer",componentId:"sc-1y84ug7-0"})(["border:",";display:flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:transparent;svg path{fill:",";}&:hover{svg path{fill:",";}}&:is(:focus,:active){svg path{fill:",";}outline:none;}&:disabled{cursor:not-allowed;svg path{fill:",";}}"],(e=>e.theme["spacing-zero"]),(e=>e.theme["size-s"]),(e=>e.theme["size-s"]),(e=>e.theme["border-radius-default"]),(e=>e.theme["border-radius-default"]),(e=>e.theme["content-color-secondary"]),(e=>e.theme["content-color-primary"]),(e=>e.theme["content-color-primary"]),(e=>e.theme["content-color-tertiary"])),De=o().forwardRef(((e,n)=>{let{onClick:t,isDisabled:l,onKeyDown:i}=e;return o().createElement(Ee,{onKeyDown:i,ref:n,disabled:l,onClick:t},o().createElement(Se.Z,null))}));De.name="CloseIcon";const Te=r().div.withConfig({displayName:"CustomChipInputComponents__StyledChip",componentId:"sc-1y84ug7-1"})(["box-sizing:border-box;display:flex;justify-content:center;align-items:center;height:",";padding:",";color:",";background-color:",";border-radius:",";&:hover{background-color:",";}&:is(:active,:focus-within){background-color:",";}"],(e=>e.theme["size-s"]),(e=>`2px ${e.theme["spacing-zero"]} 2px ${e.theme["spacing-s"]}`),(e=>e.theme["content-color-primary"]),(e=>e.isDisabled?e.theme["highlight-background-color-tertiary"]:e.theme["background-color-tertiary"]),(e=>e.theme["border-radius-default"]),(e=>!e.isDisabled&&e.theme["highlight-background-color-primary"]),(e=>e.theme["highlight-background-color-tertiary"]));function _e(e){const n=(0,i.useRef)(),{label:t,onClick:l,isDisabled:a}=e;return o().createElement(Te,{onClick:()=>{n.current.focus()},isDisabled:a},o().createElement(Me,{isDisabled:a},t),o().createElement(De,{onKeyDown:e=>{"Backspace"===e.key&&l()},ref:n,isDisabled:a,onClick:e=>{l(),e.stopPropagation()}}))}function Me(e){const{children:n,isDisabled:t}=e;return o().createElement(V.ZP,{type:"body-medium",color:t&&"content-color-secondary"},n)}var Ne=t(35736),Re=t(21466);function Ze(e){const n=e.split(/[/\\]/).pop()||"",t=n.split(".").pop()||"";return{name:n,extension:t}}const Fe=["value","onReset","id","label","name","multiple","isDisabled","loading","error","accept","autoFocus","onChange"],Ie="Couldn't upload file",Ae=r().input.attrs({type:"file"}).withConfig({displayName:"file-uploader__StyledInputFile",componentId:"sc-cfed37-0"})(["opacity:0;height:0;width:0;z-index:-1;&:focus + label{box-shadow:var(--shadow-focus);outline:none;}"]),We=r().label.withConfig({displayName:"file-uploader__StyledFileUploaderLabel",componentId:"sc-cfed37-1"})(["display:flex;gap:var(--spacing-s);user-select:none;color:",";font-size:var(--text-size-m);width:max-content;height:var(--size-s);line-height:1.8;vertical-align:middle;padding:var(--spacing-zero) var(--spacing-m);border:var(--button-outline-border);border-color:var(--button-outline-border-color);box-sizing:border-box;border-radius:var(--border-radius-default);&:hover{cursor:",";",";}"],(e=>e.isDisabled?"var(--content-color-tertiary)":"var(--content-color-primary)"),(e=>e.isDisabled?"not-allowed":"pointer"),(e=>!e.isDisabled&&"border-color: var(--button-outline-hover-border-color)")),ze=r()(Ve.Z).withConfig({displayName:"file-uploader__FileUploaderContainer",componentId:"sc-cfed37-2"})(["max-width:100%;"]),Pe=r().div.withConfig({displayName:"file-uploader__StyledChip",componentId:"sc-cfed37-3"})(["width:100%;span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}"]);function Be(e){return(0,F.jsx)(je.VW,{children:(0,F.jsx)(Oe,(0,l.Z)({},e))})}function Oe(e){const{value:n,onReset:t,id:o,label:a,name:r,multiple:s,isDisabled:d,loading:u,error:p,accept:h,autoFocus:b,onChange:g}=e,m=(0,c.Z)(e,Fe),{addToast:v}=(0,je.ZP)();let f;if((0,i.useEffect)((()=>{p&&v({status:"error",title:Ie,description:p})}),[p,v]),null!=n&&n.length){const e=n.length,l=n[0],i=n.join(", "),o=e>1?`${e} files selected`:`${l}`;f=(0,F.jsx)(S.Z,{content:i,children:(0,F.jsx)(Pe,{children:(0,F.jsx)(_e,{label:o,onClick:t})})})}else f=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ae,(0,l.Z)({},m,{id:o,onChange:e=>{const n=e.target,t=n&&n.files;!d&&t&&(null==g||g(t))},multiple:s,disabled:d,accept:h,name:r,autoFocus:b,onClick:e=>{e.currentTarget.value="",(async e=>{e.preventDefault();const n=await(0,Re.openVSCodeFilePicker)({title:r,canSelectMany:s,filters:{default:(null==h?void 0:h.split(","))||[]}});!d&&n&&(null==g||g(function(e){const n=new DataTransfer;for(const{path:t}of e){const{name:e}=Ze(t),l=new File([e],e,{type:"file"});Object.defineProperty(l,"path",{value:t,enumerable:!0,writable:!0}),n.items.add(l)}return n.files}(n)))})(e)}})),(0,F.jsxs)(We,{htmlFor:o,isDisabled:d,children:[u&&(0,F.jsx)(Ne.Z,{size:"small"}),(0,F.jsx)("span",{children:a})]})]});return(0,F.jsx)(ze,{direction:"column",alignItems:"center",children:f})}const He=()=>{const e=(0,i.useRef)(!0);return(0,i.useEffect)((()=>()=>{e.current=!1}),[]),e},Ke="Select Files",Le=r()(Ve.Z).withConfig({displayName:"key-value-file-uploader__StyledContainer",componentId:"sc-12ibx3l-0"})(["padding:var(--spacing-xs);"]);function $e(e){const{id:n,type:t,value:l,hidden:o,error:a,onFilesSelect:r,onChange:s}=e,[d,c]=(0,i.useState)(!1),u=He(),p=(0,i.useMemo)((()=>Array.isArray(l)?l:l?[l]:[]),[l]);return o?null:(0,F.jsx)(Le,{height:"100%",width:"100%",children:(0,F.jsx)(Be,{label:Ke,id:"key-value-file-uploader",multiple:!0,error:a,value:p,loading:d,onChange:e=>{r&&(c(!0),r(n,e).finally((()=>{u.current&&c(!1)})))},onReset:()=>null==s?void 0:s(t,"")})})}const Ue=e=>e.disableEdit,qe=(e,n)=>n||e.system&&!e.allowedToToggle,Xe=(e,n)=>!e.disableEdit&&!(null!=n&&n.disableToggle)||e.system;var Ye=t(95362),Ge=t(70262);const Je=r().div.withConfig({displayName:"toggle-mask-button__IconContainer",componentId:"sc-1bzaljx-0"})(["padding:var(--spacing-xs) var(--spacing-s);border-radius:var(--border-radius-default);opacity:",";&:hover{cursor:pointer;}"],(({alwaysPresent:e})=>e?"1":"0"));function Qe({onClick:e,maskState:n,isVisible:t}){const l=!1===n.isMasked;return(0,F.jsx)(Je,{role:"button",className:"toggle-mask","aria-label":"toggle-mask-row",onClick:e,alwaysPresent:l||t,children:n.isMasked?(0,F.jsx)(Ye.Z,{}):(0,F.jsx)(Ge.Z,{})})}var en=t(64691),nn=t(48263),tn=t(80605),ln=t(59824),on=t(17282),an=t(29225);const rn=e=>{const{onPersist:n,onReset:t,disableVariablePersistAction:l,disablePersistActionTooltip:i,disableResetActionTooltip:o,disableVariableResetAction:a}=e,r=(e=!1,n)=>{if(e){let e;switch(n){case"persist":e=i;break;case"reset":e=o}return e||"You do not have permissions to perform this action."}return null};return(0,F.jsxs)(en.Z,{children:[(0,F.jsx)(nn.Z,{children:(0,F.jsx)(tn.Z,{icon:(0,F.jsx)(an.Z,{size:"small"}),type:"tertiary",tooltip:"View more actions",size:"small","data-testid":"more-options-button"})}),(0,F.jsxs)(ln.Z,{placement:"bottom-end",children:[(0,F.jsx)(on.Z,{onClick:n,isDisabled:l,tooltip:r(l,"persist"),children:"Persist"}),(0,F.jsx)(on.Z,{onClick:t,isDisabled:a,tooltip:r(a,"reset"),children:"Reset"})]})]})},sn=r().div.withConfig({displayName:"key-value-row-actions-right__StyledActionsContainer",componentId:"sc-acbvs-0"})(["display:flex;flex-direction:row;opacity:",";margin-right:var(--spacing-xs);"],(({isVisible:e})=>e?"1":"0")),dn=({isHidden:e=!1,children:n,isVisible:t})=>e||!n?null:(0,F.jsx)(sn,{isVisible:t,children:n});var cn=t(26246);const un=["warning"],pn=["prevValue","prevCurrentWidth"],hn=["nextValue","nextCurrentWidth"],bn=r().div.withConfig({displayName:"key-value-form-row__KeyValueFormRowContainer",componentId:"sc-1ypxq1j-0"})(["display:flex;flex-direction:row;position:relative;flex:0;height:32px;border-bottom:var(--border-width-default) var(--border-style-solid) var(--border-color-default);background-color:",";color:",";"],(e=>e.isRowFocused?"var(--background-color-secondary) !important":e.isRowSelected||e.disabled?"var(--background-color-secondary)":"inherit"),(e=>e.disabled?"var(--content-color-tertiary)":"inherit")),gn=r().div.withConfig({displayName:"key-value-form-row__KeyValueRowInput",componentId:"sc-1ypxq1j-1"})(["position:relative;display:flex;flex:1;min-width:0;flex-direction:row;color:",";"],(e=>e.isBlocked?"var(--content-color-tertiary)":"inherit")),mn=r().div.withConfig({displayName:"key-value-form-row__StyledRowActionsContainer",componentId:"sc-1ypxq1j-2"})(["display:flex;align-items:center;cursor:pointer;border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);"]),vn=r()(u.Z).withConfig({displayName:"key-value-form-row__StyledVariableTypeDropdown",componentId:"sc-1ypxq1j-3"})([".aether-dropdown__control,.aether-dropdown__control--is-focused:hover{border:none;width:100%;box-shadow:none;background-color:unset !important;}"]),fn=new Map;fn.set("default",{value:ce,label:"default"}),fn.set("secret",{value:de,label:"secret"});const yn=[fn.get("default"),fn.get("secret")];function xn(e){const{index:n,value:t,onChange:o,onRemove:a,currentWidth:r,showColumns:s,allowedColumns:d,enableFiles:u,onFilesSelect:p,maskState:h,toggleMaskValue:b,hideVariableTypeDropdown:g,onPersist:m,onReset:v,onBlur:f,enableVariableSuggestions:y,optionsDropdownValues:x,isDuplicated:C}=e,w=(0,i.useRef)(o);w.current=o;let{key:k,value:V,sessionValue:j="",options:S,type:E,enabled:D=!0,description:T="",fileUploadError:_}=t;const M=E===de?de:ce,N=s.includes("variableType")?M:E||"text",[R,Z]=(0,i.useState)(null),[I,A]=(0,i.useState)(null),z=null!==R,P=(0,i.useMemo)((()=>{var e;return null!=(e=se.find((e=>e.value===t.type)))?e:se[0]}),[t.type]),H=(0,i.useCallback)(((e,n)=>{"sessionValue"===e&&void 0!==n&&t.isSessionValueDeleted&&(null==w.current||w.current((0,l.Z)({},t,{[e]:n,isSessionValueDeleted:!1}))),null==w.current||w.current((0,l.Z)({},t,{[e]:n}))}),[t]),K=(0,i.useCallback)((e=>{(0,c.Z)(t,un),H("enabled",e)}),[t,H]),L=(0,i.useCallback)((()=>{a&&a()}),[a]),$=(0,i.useCallback)((n=>e[`nonEditable${O(n)}s`]),[e]);function U(e){return Number(r[null==s?void 0:s.indexOf(e)])}return(0,F.jsxs)(bn,{role:"row","aria-rowindex":n,disabled:Ue(t),isRowSelected:e.isRowSelected,isRowFocused:null!==R,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[(0,F.jsx)(W,{disabled:e.disableSorting&&e.nonEditableToggles,shouldShowCheckbox:Xe(t,e),isRowEnabled:D,onToggleEnabledState:K,isCheckboxDisabled:qe(t,e.nonEditableToggles)}),(0,F.jsxs)(gn,{isBlocked:t.disableEdit,children:[(0,F.jsx)(B,{columnWidth:U("key"),isNonEditable:$("key"),isLastColumn:s&&"key"===s[s.length-1],content:(0,F.jsx)(ve,{type:"key",value:k,currentWidth:U("key"),onFocus:()=>Z("key"),onChange:H,isEditable:"key"===R,placeholder:e.keyPlaceholder,preventEnter:e.disableMultilineKey||!1,readOnly:t.disableEdit||e.nonEditableKeys,shouldFocusOnMount:!0,onBlur:()=>Z(null),isDuplicated:C,actions:(0,F.jsx)(ke,{hidden:!I||!u,options:se,defaultOption:P,onChange:e=>H("type",e.value)}),indicators:(0,F.jsx)(Ce,{infoTitle:t.infoTitle,info:t.info,placement:"right"}),enableVariableSuggestions:y})}),s.includes("variableType")&&(0,F.jsx)(B,{columnWidth:U("variableType"),isNonEditable:$("variableType"),isLastColumn:s&&"variableType"===s[s.length-1],content:(!g||e.nonEditableVariableTypes)&&(0,F.jsx)(vn,{isRowFocused:z,tabIndex:-1,isDisabled:e.nonEditableVariableTypes,onChange:async t=>{const{disableAllVariablesSync:l=!1,disableSecretVariablesSync:i}=e;if(E===t.value)return;if(l||!i&&t.value===de||i&&t.value===de&&!V)return H("type",t.value),void(b&&b(n));const o=cn.Modals.getModals(),a=await o.showWarningDialog({uid:"kv-editor-variable-type-change-confirmation",subject:`Change ${k}'s type to ${t.value}?`,message:"This will reveal the hidden values in plain text everywhere in the app for all team members",options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:"Change type",isPrimary:!0}]});return a&&"Change type"===a.title?(H("type",t.value),void(b&&b(n))):void 0},options:yn,value:fn.get(N),isClearable:!1,isSearchable:!1,menuWidth:100})}),s.includes("value")&&(0,F.jsx)(B,{columnWidth:U("value"),isNonEditable:$("value"),isLastColumn:s&&"value"===s[s.length-1],content:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ve,{hidden:"file"===E,type:"value",value:V,currentWidth:U("value"),onFocus:()=>Z("value"),onChange:H,isEditable:"value"===R,placeholder:e.valuePlaceholder,preventEnter:e.disableMultilineValue||!1,readOnly:t.disableEdit||e.nonEditableValues,shouldFocusOnMount:!0,onBlur:()=>("value",Z(null),void(f&&f("value",t))),editorType:E,maskState:h,enableVariableSuggestions:y}),(0,F.jsx)($e,{hidden:"file"!==E,id:n,type:"value",value:V,error:_,onChange:H,onFilesSelect:p})]})}),s.includes("description")&&(0,F.jsx)(B,{columnWidth:U("description"),isNonEditable:$("description"),isLastColumn:s&&"description"===s[s.length-1],content:(0,F.jsx)(ve,{type:"description",value:T,onChange:H,placeholder:e.descriptionPlaceholder,isEditable:"description"===R,currentWidth:U("description"),onFocus:()=>Z("description"),readOnly:t.disableEdit||e.nonEditableDescriptions,shouldFocusOnMount:!0,onBlur:()=>Z(null)})}),s.includes("sessionValue")&&(0,F.jsx)(B,{columnWidth:U("sessionValue"),isNonEditable:$("sessionValue"),isLastColumn:s&&"sessionValue"===s[s.length-1],content:(0,F.jsx)(ve,{type:"sessionValue",value:j,onChange:H,isEditable:"sessionValue"===R,placeholder:t.isSessionValueDeleted?"[Deleted]":e.sessionValuePlaceholder,preventEnter:e.disableMultilineValue||!1,currentWidth:U("sessionValue"),onFocus:()=>Z("sessionValue"),readOnly:t.disableEdit||e.nonEditableSessionValue,shouldFocusOnMount:!0,onBlur:()=>Z(null),editorType:E,maskState:h,enableVariableSuggestions:y})}),s.includes("options")&&(0,F.jsx)(B,{columnWidth:U("options"),isNonEditable:$("options"),isLastColumn:s&&"options"===s[s.length-1],content:(0,F.jsx)(vn,{isRowFocused:z,tabIndex:-1,onChange:e=>H("options",e),options:x,value:S,isClearable:!1,isSearchable:!1,menuWidth:100})}),(0,F.jsx)(mn,{children:((null==s?void 0:s.includes("value"))||(null==s?void 0:s.includes("description"))||(null==s?void 0:s.includes("sessionValue")))&&!e.isRowSelected&&!e.value.disableEdit&&(0,F.jsxs)(F.Fragment,{children:[N===de&&(0,F.jsx)(Qe,{isVisible:I,maskState:h,onClick:()=>b(n)}),(0,F.jsxs)(dn,{isHidden:z,isVisible:I,children:[!e.disableDelete&&(0,F.jsx)(q,{onClick:L}),!e.disableVariableRowDropdown&&d.includes("sessionValue")&&(0,F.jsx)(rn,{onPersist:m,onReset:v,disableVariablePersistAction:e.disableVariablePersistAction||e.disableSecretVariablesSync&&N===de,disablePersistActionTooltip:e.disablePersistActionTooltip,disableVariableResetAction:e.disableVariableResetAction||e.disableSecretVariablesSync&&N===de,disableResetActionTooltip:e.disableResetActionTooltip})]})]})})]})]})}const Cn=(0,i.memo)(xn,((e,n)=>{const{prevValue:t,prevCurrentWidth:l}=e,i=(0,c.Z)(e,pn),{nextValue:o,nextCurrentWidth:a}=n,r=(0,c.Z)(n,hn);return!!h()(t,o)&&(!!h()(i,r)&&!!H(l,a))}));var wn=t(49437),kn=t(80047);const Vn=["values","disableSorting","onChange","onRemove","disableDelete","disableCreate","disableToggle","keyPlaceholder","valuePlaceholder","descriptionPlaceholder","disableVariableRowDropdown","currentWidth","maskStatesMap","toggleMaskValue","onPersist","onReset","onBlur","filteredIndices","searchValue","enableScroll","duplicateWarningsMap"],jn=r().div.withConfig({displayName:"key-value-form-sortable__KeyValueFormSortableContainer",componentId:"sc-17kmkrd-0"})(["display:flex;flex:1;flex-direction:column;",";.key-value-form-editor-sortable__selectable{display:flex;flex-direction:column;}"],(({enableScroll:e})=>e&&"overflow: overlay;"));function Sn(e){let{values:n,disableSorting:t,onChange:o,onRemove:a,disableDelete:r,disableCreate:s,disableToggle:d,keyPlaceholder:u,valuePlaceholder:p,descriptionPlaceholder:h,disableVariableRowDropdown:b,currentWidth:g,maskStatesMap:m,toggleMaskValue:v,onPersist:f,onReset:y,onBlur:x,filteredIndices:C,searchValue:w,enableScroll:k,duplicateWarningsMap:V}=e,j=(0,c.Z)(e,Vn);const S=(0,i.useCallback)(((e,n)=>{o&&o(e,n)}),[o]),E=(0,i.useCallback)((e=>{a&&a(e)}),[a]),D=w&&C?C.map((e=>n[e])):n;return(0,F.jsx)(jn,{enableScroll:k,children:w&&0===D.length?(0,F.jsx)("div",{className:"key-value-form-editor-sortable",children:(0,F.jsx)(wn.Z,{title:"No results found",children:(0,F.jsx)(kn.Z,{name:"illustration-search"})})}):D&&D.map(((e,i)=>{var o,a,c;const C=e.id===(null==n?void 0:n.length)-1;return(0,F.jsx)(Cn,(0,l.Z)({index:null!=(o=e.id)?o:i,selectableKey:e.id,value:e,onChange:n=>S(e.id,n),onRemove:()=>E(e.id),onPersist:()=>{return n=e.id,void(f&&f(n));var n},onReset:()=>{return n=e.id,void(y&&y(n));var n},onBlur:(n,t)=>((e,n,t)=>{x&&x(e,n,t)})(e.id,n,t),disableSorting:t||C,disableToggle:d||C&&!s,disableDelete:r||C&&!s,disableVariableRowDropdown:b||C&&!s,keyPlaceholder:C&&u,valuePlaceholder:C&&p,descriptionPlaceholder:C&&h,hideVariableTypeDropdown:!s&&C,currentWidth:g,maskState:!(!s&&C)&&(m&&m[e.id]||{isMasked:e.type===de}),isDuplicated:V&&V[e.id].isOverridden,toggleMaskValue:v},j),null!=(a=null==(c=e.id)?void 0:c.toString())?a:i)}))})}var En=t(70355);function Dn(e,n=100){return e/n*100}function Tn(e,n=2){return Math.round(e*Math.pow(10,n))/Math.pow(10,n)}const _n=500,Mn=r().div.withConfig({displayName:"resize-handle__StyledDiv",componentId:"sc-o8gbx1-0"})(["height:32px;width:16px;margin-left:-8px;background-color:transparent;position:absolute;left:","%;cursor:col-resize;z-index:1;"],(e=>e.left)),Nn=e=>{const{showColumns:n,currentWidth:t,prevColumn:l,nextColumn:o,parentWidth:a=_n,handleResize:r}=e,s=(0,i.useCallback)((e=>{const l=null==n?void 0:n.indexOf(e);if(-1===l)return 0;let i=0;for(let e=0;e<=l;e++)i+=t[e];return Tn(i)}),[n,t]),d=(0,i.useMemo)((()=>{const e=s(n[(null==n?void 0:n.indexOf(l))-1])+Dn(100,a),t=s(o)-Dn(100,a);return{min:Tn(e),max:Tn(t)}}),[l,o,n,a,s]),c=(0,i.useCallback)((e=>Number.isNaN(d.min)||Number.isNaN(d.max)?e:Tn(Math.min(Math.max(e,d.min),d.max))),[d]),u=(0,i.useCallback)(((e,i)=>{const s=c(Dn(i.x,a));if(s==d.min||s==d.max)return;const u=[...t],p=t[n.indexOf(l)]+i.deltaX/a*100,h=t[n.indexOf(o)]-i.deltaX/a*100;u[null==n?void 0:n.indexOf(l)]=Tn(p,2),u[null==n?void 0:n.indexOf(o)]=Tn(h,2),null==r||r(u)}),[a,t,n,d]);return(0,F.jsx)(En.DraggableCore,{onDrag:u,children:(0,F.jsx)(Mn,{left:c(s(l))})})},Rn=r().div.withConfig({displayName:"key-value-header__KeyValueFormHeader",componentId:"sc-4dw07d-0"})(["font-size:var(--text-size-m);font-family:var(--font-family-default);"]),Zn=r().div.withConfig({displayName:"key-value-header__StyledHeaderActionsContainer",componentId:"sc-4dw07d-1"})(["border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);display:flex;align-items:center;height:32px;padding:0 var(--spacing-xs);"]),Fn=r().div.withConfig({displayName:"key-value-header__KeyValueFormHeaderRow",componentId:"sc-4dw07d-2"})(["display:flex;flex-direction:row;height:32px;position:relative;flex:1 1 auto;margin-bottom:var(--spacing-zero);border-bottom:var(--border-width-default) var(--border-style-solid) var(--border-color-default);&:hover,&.is-hovered{background-color:transparent;}&__is-highlighted{background-color:var(--background-color-info);animation:fadeOut 1.2s linear 1;.key-value-form-row__modification-options{background-color:var(--background-color-info);animation:fadeOut 1.2s linear 1;}}"]),In=r().div.withConfig({displayName:"key-value-header__KeyValueHeaderActions",componentId:"sc-4dw07d-3"})(["position:relative;display:flex;border-top-width:0;width:44px;justify-content:flex-end;border-left:var(--border-width-default) var(--border-style-solid) var(--border-color-default);border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);background-color:",";"],(e=>e.nonEditableToggles?"var(--background-color-secondary);":"inherit")),An=r().div.withConfig({displayName:"key-value-header__FeedbackState",componentId:"sc-4dw07d-4"})(["height:30px;width:0;position:absolute;background-color:var(--border-color-default);"]),Wn=r().div.withConfig({displayName:"key-value-header__HeadersGroup",componentId:"sc-4dw07d-5"})(["flex:1;flex-direction:row;position:relative;min-width:0;display:flex;"]),zn=r().div.withConfig({displayName:"key-value-header__HeaderContent",componentId:"sc-4dw07d-6"})(["padding:var(--spacing-s);color:var(--content-color-secondary);font-size:var(--text-size-m);line-height:var(--line-height-m);font-weight:var(--text-weight-medium);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:default;user-select:none;"]),Pn=r().div.withConfig({displayName:"key-value-header__HeaderColumn",componentId:"sc-4dw07d-7"})(["align-items:center;flex:",";overflow:hidden;display:flex;position:relative;box-sizing:border-box;border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);margin:var(--spacing-zero);background-color:",";"],(e=>e.isLastColumn?`0 1 ${e.columnWidth}%`:`0 0 ${e.columnWidth}%`),(e=>e.isNonEditable?"var(--background-color-secondary)":"inherit")),Bn=new Map;Bn.set("persistAll",{disabled:"You do not have permissions to perform this action.",default:"Persisting all values will replace all initial values with the current values of the variables."}),Bn.set("resetAll",{default:"Resetting all values will replace all current values with the initial values of the variables."});const On=(e,n,t)=>{let l;var i,o;return n&&(l=t||(null==(i=Bn.get(e))?void 0:i.disabled)),l||(l=null==(o=Bn.get(e))?void 0:o.default),l},Hn=({allowedColumns:e,persistAll:n,disableVariablePersistAction:t,disablePersistActionTooltip:l,resetAll:i,disableVariableResetAction:o,disableResetActionTooltip:a})=>e.includes("sessionValue")?(0,F.jsx)(Zn,{children:(0,F.jsxs)(en.Z,{closeOnSelect:!1,children:[(0,F.jsx)(nn.Z,{"data-testid":"key-value-editor-more-actions-button",children:(0,F.jsx)(tn.Z,{size:"small",icon:(0,F.jsx)(an.Z,{size:"small"}),type:"tertiary",tooltip:"View more actions","data-testid":"more-options-button-column-header"})}),(0,F.jsxs)(ln.Z,{children:[(0,F.jsx)(on.Z,{onClick:n,isDisabled:t,tooltip:On("persistAll",t,l),children:"Persist all"}),(0,F.jsx)(on.Z,{onClick:i,isDisabled:o,tooltip:On("resetAll",o,a),children:"Reset all"})]})]})}):null;function Kn(e){const{showColumns:n,currentWidth:t,handleWidthChange:l,keyHeading:o,valueHeading:a,descriptionHeading:r,sessionHeading:s,typeHeading:d,optionsHeading:c,allowedColumns:u,persistAll:p,resetAll:h,disableVariablePersistAction:b,disablePersistActionTooltip:g,disableVariableResetAction:m,disableResetActionTooltip:v}=e,f=(0,i.useRef)(null),[y,x]=(0,i.useState)(null);(0,i.useEffect)((()=>{const e=new ResizeObserver((e=>{x(e[0].contentRect.width)})),n=f.current;return e.observe(n),()=>{e.unobserve(n)}}),[]);const C=(0,i.useCallback)((n=>e[`nonEditable${O(n)}s`]),[e]),w=(0,i.useCallback)((e=>Number(t[null==n?void 0:n.indexOf(e)])),[n,t]);return(0,F.jsx)(Rn,{role:"rowgroup",children:(0,F.jsxs)(Fn,{role:"row",children:[(0,F.jsx)(In,{children:(0,F.jsx)(An,{})}),(0,F.jsxs)(Wn,{ref:f,children:[(0,F.jsx)(Pn,{type:"key",role:"columnheader",columnWidth:w("key"),isNonEditable:C("key"),isLastColumn:n&&"key"===n[n.length-1],children:(0,F.jsx)(zn,{children:o||"Key"})}),(null==n?void 0:n.includes("variableType"))&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Nn,{handleResize:l,showColumns:n,currentWidth:t,prevColumn:"key",nextColumn:"variableType",parentWidth:y}),(0,F.jsx)(Pn,{type:"variableType",role:"columnheader",columnWidth:w("variableType"),isNonEditable:C("variableType"),isLastColumn:n&&"variableType"===n[n.length-1],children:(0,F.jsx)(zn,{children:d||"Type"})})]}),(null==n?void 0:n.includes("value"))&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Nn,{handleResize:l,showColumns:n,currentWidth:t,prevColumn:n.includes("variableType")?"variableType":"key",nextColumn:"value",parentWidth:y}),(0,F.jsx)(Pn,{type:"value",role:"columnheader",columnWidth:w("value"),isNonEditable:C("value"),isLastColumn:n&&"value"===n[n.length-1],children:(0,F.jsx)(zn,{children:a||"Value"})})]}),(null==n?void 0:n.includes("description"))&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Nn,{handleResize:l,showColumns:n,currentWidth:t,prevColumn:"value",nextColumn:"description",parentWidth:y}),(0,F.jsx)(Pn,{type:"description",role:"columnheader",columnWidth:w("description"),isNonEditable:C("description"),isLastColumn:n&&"description"===n[n.length-1],children:(0,F.jsx)(zn,{children:r||"Description"})})]}),(null==n?void 0:n.includes("sessionValue"))&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Nn,{handleResize:l,showColumns:n,currentWidth:t,prevColumn:"value",nextColumn:"sessionValue",parentWidth:y}),(0,F.jsx)(Pn,{type:"sessionValue",role:"columnheader",columnWidth:w("sessionValue"),isNonEditable:C("sessionValue"),isLastColumn:n&&"sessionValue"===n[n.length-1],children:(0,F.jsx)(zn,{children:s||"Current value"})})]}),u.includes("sessionValue")&&(0,F.jsx)(Hn,{allowedColumns:u,persistAll:p,resetAll:h,disablePersistActionTooltip:g,disableResetActionTooltip:v,disableVariablePersistAction:b,disableVariableResetAction:m}),(null==n?void 0:n.includes("options"))&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Nn,{handleResize:l,showColumns:n,currentWidth:t,prevColumn:"value",nextColumn:"options",parentWidth:y}),(0,F.jsx)(Pn,{type:"options",role:"columnheader",columnWidth:w("options"),isNonEditable:C("options"),isLastColumn:n&&"options"===n[n.length-1],children:(0,F.jsx)(zn,{children:c||"Options"})})]})]})]})})}const Ln=["defaultValue","entityType","values","onChange","showColumns","nonEditableKeys","nonEditableValues","nonEditableDescriptions","nonEditableToggles","nonEditableOptions","keyHeading","valueHeading","sessionHeading","optionsHeading","optionsTooltip","nonEditableVariableTypes","hideBulkOptions","maskStatesMap","toggleMaskValue","initialColumnWidths","disableVariablePersistAction","disableVariableResetAction","disableSecretVariablesSync","disablePersistActionTooltip","disableResetActionTooltip","onDeleteRow","disallowDuplicates"],$n=r().div.withConfig({displayName:"key-value-form-editor__StyledKeyValueFormEditor",componentId:"sc-1xhynph-0"})(["display:flex;flex:1;flex-direction:column;border-top:thin solid var(--border-color-default);min-height:0;"]);function Un(e){let{defaultValue:n="",entityType:t,values:o,onChange:a,showColumns:r,nonEditableKeys:s,nonEditableValues:d,nonEditableDescriptions:u,nonEditableToggles:p,nonEditableOptions:h,keyHeading:b,valueHeading:g,sessionHeading:m,optionsHeading:v,optionsTooltip:f,nonEditableVariableTypes:y,hideBulkOptions:x,maskStatesMap:C,toggleMaskValue:w,initialColumnWidths:k,disableVariablePersistAction:V,disableVariableResetAction:j,disableSecretVariablesSync:S,disablePersistActionTooltip:E,disableResetActionTooltip:D,onDeleteRow:T,disallowDuplicates:_}=e,M=(0,c.Z)(e,Ln);const N={showColumns:r,allowedColumns:M.allowedColumns,nonEditableKeys:s,nonEditableValues:d,nonEditableDescriptions:u,nonEditableToggles:p,nonEditableOptions:h,hideBulkOptions:x},R=(0,i.useRef)(a);R.current=a;const[Z,I]=(0,i.useState)(function(e,n){let t;return n?t=n:(t=new Array(e.length).fill(Math.floor(100/e.length)),t[t.length-1]=t.at(-1)+(100-t.reduce(((e,n)=>e+n)))),t}(r,k)),A=(0,i.useCallback)(((e,l={})=>{let i="text";"environment"!==t&&"globals"!==t||(i="default"),"collection"===t&&(i="string");const o={key:l.key||n,value:l.value||n,description:l.description||n,type:l.type||i,id:e};return M.allowedColumns.includes("sessionValue")&&(o.sessionValue=l.sessionValue||null),M.disableToggle||(o.enabled=!0),o}),[n,M.disableToggle,t,M.allowedColumns]),W=(0,i.useCallback)((()=>{if(o.length>0){var e=null==o?void 0:o.reduce((function(e,n){return e.id>=n.id?e:n}),{});return n=e,[Object,Array].includes((n||{}).constructor)&&0===Object.entries(n||{}).length?0:e.id+1}var n;return 0}),[o]),z=(0,i.useCallback)(((e,n)=>{const t=[...o],i=t.length===e?[...t,A(W(),n)]:t.map((t=>t.id===e?(0,l.Z)({},t,n):(0,l.Z)({},t)));null==R.current||R.current(i)}),[o,A,W]),P=(0,i.useCallback)((e=>{const n=[...o],t=null==n?void 0:n.filter(((n={})=>n.id!==e));T&&T(e),null==R.current||R.current(t)}),[o,T]),B=(0,F.jsx)(Kn,(0,l.Z)({},N,{keyHeading:b||"Key",valueHeading:g||"Value",sessionHeading:m||"Current value",optionsHeading:v||"Options",optionsTooltip:f,nonEditableVariableTypes:y,handleWidthChange:I,currentWidth:Z,persistAll:()=>{if(V)return;let e=!1;const n=o.reduce(((n,t)=>{const i=t.enabled?t.sessionValue:t.value;return t.isSessionValueDeleted?(e=!0,n):(!e&&(e=!(S&&t.type===de)),S&&t.type===de?n.push(t):n.push((0,l.Z)({},t,{value:i})),n)}),[]);e&&(null==R.current||R.current(n))},resetAll:()=>{if(j)return;let e=!1;const n=o.map((n=>{const t=n.enabled?n.value:n.sessionValue;return S&&n.type===de?n:(e=!0,(0,l.Z)({},n,{sessionValue:t,isSessionValueDeleted:!1}))}));e&&(null==R.current||R.current(n))},disableVariablePersistAction:V,disableVariableResetAction:j,disablePersistActionTooltip:E,disableResetActionTooltip:D})),O=(0,i.useMemo)((()=>M.disableCreate?o:[...o,A(W())]),[o,M.disableCreate,A,W]),H=(0,i.useMemo)((()=>_?O.map(((e,n)=>{if(e.enabled&&""!==e.key)for(let t=n+1;t<O.length;t++){const n=O[t];if(e.key===n.key&&n.enabled&&""!==n.key)return(0,l.Z)({},e,{isOverridden:!0})}return(0,l.Z)({},e,{isOverridden:!1})})):null),[O,_]);return(0,F.jsxs)($n,{children:[o.length>0||!M.disableCreate?B:null,(0,F.jsx)(Sn,(0,l.Z)({},N,M,{nonEditableVariableTypes:y,values:O,onChange:z,onRemove:P,currentWidth:Z,maskStatesMap:C,toggleMaskValue:w,onPersist:e=>{if(V)return;let n=!1;const t=o.reduce(((t,i)=>{if(i.id===e){if(i.isSessionValueDeleted)return n=!0,t;S&&i.type===de?t.push(i):(n=!0,t.push((0,l.Z)({},i,{value:i.sessionValue})))}else t.push(i);return t}),[]);n&&(null==R.current||R.current(t))},onReset:e=>{if(j)return;let n=!1;const t=o.map((t=>t.id!==e||S&&t.type===de?t:(n=!0,(0,l.Z)({},t,{sessionValue:t.value,isSessionValueDeleted:!1}))));n&&(null==R.current||R.current(t))},onBlur:(e,n,t)=>{const i=o.findIndex((n=>n.id===e)),a=-1!==i&&o[i].sessionValue;let r;"value"===n&&-1!==i&&null===a&&t.value&&(r=[...o],r[i]=(0,l.Z)({},t,{sessionValue:t.value}),null==R.current||R.current(r))},disableVariablePersistAction:V,disableVariableResetAction:j,disableSecretVariablesSync:S,disablePersistActionTooltip:E,disableResetActionTooltip:D,duplicateWarningsMap:H}))]})}var qn=t(43652);const Xn=X(((e,...n)=>e(...n)),100),Yn=({onSearchValueChange:e})=>{const[n,t]=(0,i.useState)("");return(0,F.jsx)("div",{className:"search-variable",children:(0,F.jsx)(qn.Z,{placeholder:"Filter variables",value:n,type:"search",onChange:n=>{t(n.target.value),Xn(e,n.target.value)},onClear:()=>{t(""),e("")},prefix:!0,name:"filter-values"})})};function Gn(e,n){try{const t=(0,be.castNonStringTypesToString)(e),l=(0,be.castNonStringTypesToString)(n),i=t.toLowerCase(),o=l.toLowerCase();return i.indexOf(o)}catch(t){return console.error("PatterSearch~caseInsensitiveIndexof: Failed with error",t,e,n),-1}}const Jn=r().div.withConfig({displayName:"key-value-editor__KeyValueEditorContainer",componentId:"sc-4h8dgj-0"})(["padding-bottom:var(--spacing-s);display:flex;flex-direction:column;box-sizing:border-box;",";&.is-filterable{display:flex;flex-direction:column;}.search-variable{width:240px;padding-top:var(--spacing-xs);padding-bottom:var(--spacing-s);}"],(({enableScroll:e})=>e&&"height: 100%;")),Qn=(e,n)=>!n||!(!e.key||-1===Gn(e.key,n))||"secret"!==e.type&&(!(!e.value||-1===Gn(e.value,n))||!(!e.sessionValue||-1===Gn(e.sessionValue,n))||void 0),et=(e,n)=>{if(!n)return null;const t=[];for(const[l,i]of e.entries())Qn(i,n)&&t.push(l);return t},nt=(0,d.observer)((function(e){const{values:n,onChange:t,tableName:o,disallowDuplicates:a,allowedColumns:r,showColumns:d,onColumnToggle:c,keyPlaceholder:u,valuePlaceholder:p,maskStatesMap:h,toggleMaskValue:b,initialColumnWidths:g,enableFiltering:m=!1,enableScroll:v,isDirty:f=!1}=e,[y,x]=(0,i.useState)([]),[C,w]=(0,i.useState)(""),[k,V]=(0,i.useState)(null),j=(0,i.useRef)(f),S=(0,i.useCallback)((e=>{if(0===y.length)return!0;e.preventDefault();const l=null==n?void 0:n.filter(((e,n)=>!(null!=y&&y.includes(n))));y.sort(),0!==y[0]&&(y.length,n.length),x([]),t(l)}),[n,t,y]),E=(0,i.useCallback)((()=>{y.length>0&&x([])}),[y]),D=(0,i.useMemo)((()=>{let e=0;return(0,s.computed)((()=>null==n?void 0:n.map((n=>(0,l.Z)({},n,{id:e++})))))}),[n]).get();return(0,i.useEffect)((()=>{const e=et(D,C);V(e)}),[C]),(0,i.useEffect)((()=>{if(j.current&&!f){const e=et(D,C);V(e)}j.current=f}),[f]),(0,F.jsxs)(Jn,{role:"table","aria-label":o,enableScroll:v,children:[m&&(0,F.jsx)(Yn,{onSearchValueChange:w}),(0,F.jsx)(Un,(0,l.Z)({},e,{disallowDuplicates:a,onChange:t,values:D,selectedRows:y,deleteSelectedRows:S,onBeforeInput:E,allowedColumns:r,showColumns:d,onColumnToggle:c,keyPlaceholder:void 0===u?"Key":u,valuePlaceholder:void 0===p?"Value":p,descriptionPlaceholder:"Description",maskStatesMap:h,toggleMaskValue:b,initialColumnWidths:g,filteredIndices:k,searchValue:C,onDeleteRow:e=>{if(!C)return;const n=((e,n)=>{const t=[],l=new Set(n);let i=0;for(const n of e)l.has(n)?i++:t.push(n-i);return t})(k,[e]);V(n)}})),(0,F.jsx)(cn.Modals.Ui.ModalDialog,{uid:"kv-editor-variable-type-change-confirmation"})]})})),tt=e=>(0,F.jsx)(nt,(0,l.Z)({},e))}}]);
//# sourceMappingURL=6029.0939e687fcf52a47.js.map